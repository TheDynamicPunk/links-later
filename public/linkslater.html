<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="180x180" href="./assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicon/favicon-16x16.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js"></script>
    <link rel="manifest" href="assets/favicon/site.webmanifest">
    <meta name="theme-color" content="#eec643"/>
    <link rel="stylesheet" href="css/style.css">
    <title>Links Later</title>
</head>
<body>
    <div class="modal-wrapper"></div>
    <div class="navbar"></div>
    <section id="input-section">
        <h1 style="text-align: center;">Paste links to track here, separated by comma üëáüèª</h1>
        <div contenteditable="true" id="links-input" placeholder="Add some links hereüòâ" onkeypress="pressedEnter(event)"></div>
        <div class="btns">
            <button class="add-links btn1">Add <i class="fas fa-plus"></i></button>
            <button class="btn1" onclick="clearInput()">Clear</button>
        </div>
        <div class="loader" style="opacity: 0;">
            <div class="spinner">
                <div class="rect1"></div>
                <div class="rect2"></div>
                <div class="rect3"></div>
                <div class="rect4"></div>
                <div class="rect5"></div>
            </div>
        </div>
    </section>

    <section id="collection-section">
        <h2 style="text-align: center;">Your cached links</h2>
        <div class="options">
            <div class="sort-options">
                <label for="sortMethods"><b>Sort by: </b></label>
                <select name="sortMethods" id="sortMethods">
                    <option value="select">Select</option>
                    <option value="recent">Recently Added</option>
                    <option value="oldest">Oldest</option>
                </select>
                <button class="btn2" onclick="copyAllLinks(this)">Copy all links</button>
            </div>
            <div class="number-of-links"></div>
        </div>
        <p style="text-align: center; padding-top: 2em; font-size: 1.2rem;" class="no-links-prompt">No links to show... Add some links above to see them here!</p>
        <div class="collection">
            <!-- Sample Pane for CSS Manipulations -->
            <!-- <div class="pane">
                <img src="https://i.ytimg.com/vi/BuuY0qiPH4w/maxresdefault.jpg" alt="link-preview">
                <div class="pane-container">
                    <div id="timestamp">May 16 2020, 1:56 PM</div>
                    <h3 class="title">white sauce pasta ‡§ï‡•Ä ‡§∏‡§¨‡§∏‡•á ‡§Ö‡§®‡•ã‡§ñ‡•Ä ‡§∞‡•á‡§∏‡§ø‡§™‡•Ä - ‡§™‡§æ‡§∏‡•ç‡§§‡§æ ‡§µ‡§æ‡§á‡§ü ‡§∏‡•â‡§∏ ‡§Æ‡•á‡§Ç recipe - cookingshooking</h3>
                    <p class="description">Dosto, aaj ke video me banaenge Pasta in White Sauce ki Recipe, ye wali ekdam anokhi recipes hain , indian style me.. Hope aap sabhi ko pasand aae :) Cooking...</p>
                    <div class="cta-btns">
                        <a class="btn1" href=" https://www.youtube.com/watch?v=BuuY0qiPH4w" target="blank">Open</a>
                        <button class="btn1" id="deletePane" onclick="deletePane(this)"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
            </div> -->
        </div>
    </section>

    <div class="toast-wrapper" style="display: none;"></div>

    <div class="footer"></div>
</body>
<script>

    if ('serviceWorker' in navigator) {
        // sw.js can literally be empty, but must exist
        navigator.serviceWorker.register('./service-worker.js');
    }

    function setCookie(name,value,days) {
        var expires = "";
        if (days) {
            var date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + (value || "")  + expires + "; path=/";
    }

    $(document).ready(function() {
        $('.navbar').load('navbar.html');
        $('.footer').load('footer.html');
        $('.toast-wrapper').load('toast.html');
        
        let timerId;

        // Check again and again till cookie is loaded
        timerId =  setInterval(() => {

            if(document.cookie !== '')
            {
                if(document.cookie.indexOf('breakingChanges=true') != -1)
                {                    
                    if(document.cookie.indexOf('seenPopup=true') != -1)
                    {
                        clearInterval(timerId);
                    }
                    else {
                        $('.modal-wrapper').load('modal.html');
                        setCookie('seenPopup', 'true', 1);
                        clearInterval(timerId);
                    }
                }
            }
        }, 1000);
    });
</script>
<script src="js/client.js"></script>
</html>